{"remainingRequest":"/var/www/html/Vue/vue-clone-tandem/node_modules/vue-loader/lib/index.js??vue-loader-options!/var/www/html/Vue/vue-clone-tandem/src/containers/calendar/calendar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/var/www/html/Vue/vue-clone-tandem/src/containers/calendar/calendar.vue","mtime":1576735048155},{"path":"/var/www/html/Vue/vue-clone-tandem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/Vue/vue-clone-tandem/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/var/www/html/Vue/vue-clone-tandem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/var/www/html/Vue/vue-clone-tandem/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IEZ1bGxDYWxlbmRhciBmcm9tICJAZnVsbGNhbGVuZGFyL3Z1ZSI7CmltcG9ydCB7IENhbGVuZGFyIH0gZnJvbSAiQGZ1bGxjYWxlbmRhci9jb3JlIjsKaW1wb3J0IGRheUdyaWRQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci9kYXlncmlkIjsKaW1wb3J0IGludGVyYWN0aW9uUGx1Z2luLCB7IERyYWdnYWJsZSB9IGZyb20gIkBmdWxsY2FsZW5kYXIvaW50ZXJhY3Rpb24iOwppbXBvcnQgdGltZUdyaWRQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci90aW1lZ3JpZCI7CmltcG9ydCBBZGRQcm9ncmFtIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvRGlsb2dCb3gvQWRkUHJvZ3JhbSI7CmltcG9ydCAkIGZyb20gJ2pxdWVyeSc7CmltcG9ydCBzbGlkZSBmcm9tICJqcXVlcnktdWkvdWkvZWZmZWN0cy9lZmZlY3Qtc2xpZGUiCmltcG9ydCBBZGRWZWhpY2xlIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvRGlsb2dCb3gvQWRkVmVoaWNsZScKaW1wb3J0IHtmb3JtYXRDdXN0b21EYXRlLCBkYXRlT2JqRm9ybWF0dGVyLCBmb3JtYXRDdXN0b21UaW1lfSBmcm9tICcuLi8uLi9oZWxwZXIvaGVscGVyJwppbXBvcnQgcGFzc3dvcmRWYWxpZGF0b3IgZnJvbSAncGFzc3dvcmQtdmFsaWRhdG9yJwppbXBvcnQgeyBnZXRMaXN0T2ZQcm9ncmFtbWVzLCBnZXRQcm9ncmFtbWVCeUlkLCBnZXRVc2VyTGlzdCwgdXBkYXRlUHJvZ3JhbSwgY3JlYXRlUHJvZ3JhbSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzJwppbXBvcnQge1RvYXN0c0NvbnRhaW5lciwgVG9hc3RzU3RvcmUsIFRvYXN0c0NvbnRhaW5lclBvc2l0aW9ufSBmcm9tICdyZWFjdC10b2FzdHMnOwoKCmNvbnN0IHNjaGVtYSA9IG5ldyBwYXNzd29yZFZhbGlkYXRvcigpCnZhciBhcnJheU9mUHJvZyA9IFtdCnZhciBjdXJyZW50TW9udGggPSBuZXcgRGF0ZSgpCnZhciB2YWxpZCA9IGZhbHNlCmxldCByZW1vdmVkTGlzdCA9IFtdCnZhciBfdGhpcyA9IG51bGwKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICJjYWxlbmRhciIsCgogIGNvbXBvbmVudHM6IHsKICAgIEZ1bGxDYWxlbmRhciwKICAgIEFkZFByb2dyYW0sCiAgICBBZGRWZWhpY2xlCiAgfSwKCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBjYWxlbmRhclBsdWdpbnM6IFtkYXlHcmlkUGx1Z2luLCBpbnRlcmFjdGlvblBsdWdpbiwgdGltZUdyaWRQbHVnaW5dLAogICAgICBjYWxlbmRhckV2ZW50czogWwogICAgICAgIC8vIGluaXRpYWwgZXZlbnQgZGF0YQogICAgICAgIHsgdGl0bGU6ICJFdmVudCAxIiwgc3RhcnQ6IG5ldyBEYXRlKCkgfSwKICAgICAgICB7IHRpdGxlOiAiRXZlbnQgMiIsIHN0YXJ0OiAiMjAxOS0xMi0wNSIgfSwKICAgICAgICB7IHRpdGxlOiAiRXZlbnQgMyIsIHN0YXJ0OiAiMjAxOS0xMi0wNiIgfSwKICAgICAgICB7IHRpdGxlOiAiRXZlbnQgNCIsIHN0YXJ0OiAiMjAxOS0xMi0wNyIgfSwKICAgICAgICB7IHRpdGxlOiAiRXZlbnQgNSIsIHN0YXJ0OiAiMjAxOS0xMi0xMCIgfSwKICAgICAgICB7IHRpdGxlOiAiRXZlbnQgNiIsIHN0YXJ0OiAiMjAxOS0xMi0xNCIgfSwKICAgICAgICB7IHRpdGxlOiAiRXZlbnQgNyIsIHN0YXJ0OiAiMjAxOS0xMi0xNSIgfQogICAgICBdLAogICAgICBjb25maWc6IHsKICAgICAgICBkZWZhdWx0VmlldzogIm1vbnRoIiwKICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICBldmVudFJlbmRlcjogZnVuY3Rpb24oZXZlbnQsIGVsZW1lbnQpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGV2ZW50Q29sb3I6ICIjZmZmIiwKICAgICAgc2hvd0FkZFByb2dyYW0gOiBmYWxzZSwKCiAgICBpc2xvYWRpbmc6ZmFsc2UsCiAgICBwcm9ncmFtOiBbXSwKICAgIGFycmF5T2ZQcm9nU3RhdGUgOiBbXSwKICAgIHZlaGljbGU6IFtdLAogICAgZWRpdGFibGVEdGE6W10sCiAgICBjdXJyZW50UHJvZ3JhbW1lSWQgOiAwLAogICAgb3BlbkFkZF9Qcm9ncmFtOiBmYWxzZSwKICAgIGlzU3VibWl0OiBmYWxzZSwKICAgIGlzRWRpdDogZmFsc2UsCiAgICBzdGFydDogbmV3IERhdGUoKSwKICAgIGVuZDogbmV3IERhdGUoKSwKICAgIHRpdGxlOiAiIiwKICAgIGVkaXRhYmxlVGl0bGU6ICIiLAogICAgZWRpdGFibGVzdGFydDogIiIsCiAgICBlZGl0YWJsZWVuZDogIiIsCiAgICBpZDogMCwKICAgIHJlbW92ZWRVc2VyTGlzdEFycmF5IDogW10sCiAgICBjdXJyZW50VmVoaWNsZUlkOjAsCiAgICB1cGRhdGVWZWhpY2xlSWQgOiBbXSwKICAgIGV2ZW50U2VsZWN0SWQ6IDAsCiAgICBpc1ZhbGlkOiBmYWxzZSwKICAgIHRpdGxlX1ZhbGlkOnRydWUsCiAgICBvYXRtZWFsX3ZhbGlkIDogdHJ1ZSwKICAgIGJlZWZfdmFsaWQgOiB0cnVlLAogICAgcGFuY2FrZV92YWxpZCA6IHRydWUsCiAgICBlbWVyYWxkX3ZhbGlkOiB0cnVlLAogICAgdmVoaWNsZV9WYWxpZCA6IGZhbHNlLAogICAgZGF0ZV9WYWxpZCA6IGZhbHNlLAogICAgZWVsX1ZhbGlkIDogZmFsc2UsCiAgICBsb2NhdGlvbl92YWxpZCA6IGZhbHNlLAogICAgcGVyc29uTGlzdF92YWxpZCA6IGZhbHNlLAogICAgcHJvZ3JhbW1fQWRkIDogZmFsc2UsCiAgICBldmVudF9kYXRlOiBuZXcgRGF0ZSgpLAogICAgZGF0ZVRpbWVTdGFydDogbmV3IERhdGUoKSwKICAgIGRhdGVUaW1lRW5kOiBuZXcgRGF0ZSgpLAogICAgdGhlbWU6ICJkYXJrIiwKICAgIFZlaGljbGVUaXRsZSA6ICcnLAogICAgcGVyc29uc0xpc3Q6IFtdLAogICAgZnVsbExpc3Q6W10sCiAgICBWZWhpY2xlc0xpc3Q6W10sCiAgICB1c2Vyc0xpc3Q6IGZhbHNlLAogICAgcHJlU2VsZWN0OiBbIlVzZXIxIiwgIlVzZXIyIl0sCiAgICB0aW1lVmFsdWU6IG5ldyBEYXRlKCksCiAgICBvcGVuQWRkX1ZlaGljbGVEbGlvZzogZmFsc2UsCiAgICB2ZWhpY2xlTm86IG51bGwsCiAgICBzaGlmdDogdHJ1ZSwKICAgIGVlbFZhbDogIiIsCiAgICBkZWZhdWx0RWVsVmFsOnt9LAogICAgZWVsSWQ6MCwKICAgIGxvY2F0aW9uVmFsOiAnJywKICAgIGlzVmVoaWNsZUFkZDp0cnVlLAogICAgICBvYXRNZWFsOiBuZXcgRGF0ZSwKICAgICAgYmVlZjogbmV3IERhdGUoKSwKICAgICAgcGFuY2FrZTogbmV3IERhdGUoKSwKICAgICAgZW1lcmFsZDogbmV3IERhdGUoKSwKICAgICAgY3VycmVudERhdGU6bmV3IERhdGUoKSwKICAgIE1vcm5pbmc6IHsKICAgICAgc2hpZnQ6ICdNb3JuaW5nJywKICAgICAgc2hpZnRUaW1lOiBuZXcgRGF0ZSgpLAogICAgfSwKICAgIEV2ZW5pbmc6IHsKICAgICAgc2hpZnQ6ICdFdmVuaW5nJywKICAgICAgc2hpZnRUaW1lOiBuZXcgRGF0ZSgpLAogICAgfSwKICAgIGZpbHRlcmVkTGlzdDpbXSwKICAgIGF2YWlsT3B0aW9ucyA6IFtdLAogICAgdXNlckxpc3Q6IFtdCiAgICB9OwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICAgICBfdGhpcyA9IHRoaXM7CgogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkgewogICAgbGV0IGRyYWdnYWJsZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215ZHJhZ2dhYmxlJykKICAgIG5ldyBEcmFnZ2FibGUoZHJhZ2dhYmxlRWwsIHsKICAgICAgaXRlbVNlbGVjdG9yOiAiLml0ZW0tY2xhc3MiLAogICAgICBldmVudERhdGE6IGZ1bmN0aW9uIChldmVudEVsKSB7CiAgICAgICAgbGV0IHRpdGxlID0gZXZlbnRFbC5nZXRBdHRyaWJ1dGUoInRpdGxlIik7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHRpdGxlOiB0aXRsZQogICAgICAgIH07CiAgICAgIH0KICAgIH0pOwogICAgICB9KQoKICAgICBfdGhpcy5tb250aENoYW5nZWhhbmRsZXIoMCkKCiAgICAkKCcuZmMtdG9kYXktYnV0dG9uJykuY2xpY2soKCkgPT4geyAgICAgIAogICAgICBfdGhpcy5tb250aENoYW5nZWhhbmRsZXIoMCkKICAgfSkKCiAgICAkKCcuZmMtcHJldi1idXR0b24nKS5jbGljaygoKSA9PiB7ICAKICAgICAgIF90aGlzLm1vbnRoQ2hhbmdlaGFuZGxlcigxKSAgICAgCiAgIH0pOwoKICAgICQoJy5mYy1uZXh0LWJ1dHRvbicpLmNsaWNrKCgpID0+IHsKICAgICAgX3RoaXMubW9udGhDaGFuZ2VoYW5kbGVyKDIpCiB9KTsKICB9LAoKCiAgbWV0aG9kczogewogICAgYXN5bmMgbW9udGhDaGFuZ2VoYW5kbGVyKGlkKXsKICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzTG9nZ2VkaW4nKQogICAgdmFyIHVwZGF0ZU1vbnRoID0gaWQgPT09IDEgPyBuZXcgRGF0ZShjdXJyZW50TW9udGguc2V0TW9udGgoY3VycmVudE1vbnRoLmdldE1vbnRoKCkgLSAxKSkgOiAKICAgICAgICAgICAgICAgICAgICAgIGlkID09PSAyID8gbmV3IERhdGUoY3VycmVudE1vbnRoLnNldE1vbnRoKGN1cnJlbnRNb250aC5nZXRNb250aCgpICsgMSkpIDoKICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKGN1cnJlbnRNb250aC5zZXRNb250aChuZXcgRGF0ZSgpLmdldE1vbnRoKCkpKQoKICAgIGN1cnJlbnRNb250aCA9IHVwZGF0ZU1vbnRoCgogICAgdmFyIG1vbnRoID0gY3VycmVudE1vbnRoLmdldE1vbnRoKCkgPiA4ID8gY3VycmVudE1vbnRoLmdldE1vbnRoKCkrMSA6ICcwJyArIHBhcnNlSW50KGN1cnJlbnRNb250aC5nZXRNb250aCgpKzEpCiAKICAgIHZhciBsYXN0RGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLG1vbnRoLDApOwogICAgdmFyIHByb2dyYW1tZVN0YXJ0ID0gY3VycmVudE1vbnRoLmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSsgIi0iICsgbW9udGggKyAiLTAxIgogICAgdmFyIHByb2dyYW1tZUVuZCA9IGN1cnJlbnRNb250aC5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkrICItIiArIG1vbnRoICsgJy0nICtsYXN0RGF0ZS5nZXREYXRlKCk7CgogICBhd2FpdCBnZXRMaXN0T2ZQcm9ncmFtbWVzKHRva2VuLHByb2dyYW1tZVN0YXJ0LHByb2dyYW1tZUVuZCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgIGFycmF5T2ZQcm9nID0gcmVzcG9uc2UuZGF0YS5kYXRhLm1hcCgoZGF0YSkgPT4gewogICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgaWQ6IGRhdGEucHJvZ3JhbW1lcy5sZW5ndGggPiAwID8gZGF0YS5wcm9ncmFtbWVzWzBdLnByb2dyYW1tZV9pZCA6IDAsCiAgICAgICAgICAgIHRpdGxlIDogKGRhdGEucHJvZ3JhbW1lcy5sZW5ndGggPiAwID8gZGF0YS5wcm9ncmFtbWVzWzBdLnZlY2hpY2xlQ291bnQgOiAwKSArICIgdmVoaWNsZXMiLAogICAgICAgICAgICBkYXRlIDogZGF0YS5kYXRlCiAgICAgICAgICB9CiAgICAgICAgICAgcmV0dXJuIGRhdGEucHJvZ3JhbW1lcy5sZW5ndGggPiAwID8gb2JqIDogZmFsc2UKICAgICAgfSkKICAgICAgICBfdGhpcy5hcnJheU9mUHJvZ1N0YXRlID0gYXJyYXlPZlByb2cKICAgIH0pCiAgfSwKCiAgdmFsaWRhdGVQcm9ncmFtIDogZnVuY3Rpb24oKXsKICAgIGxldCBwYW5jYWtlVmFsaWQgPSBmYWxzZQogICAgbGV0IGVtZXJhbGRWYWxpZCA9IGZhbHNlCiAgICAKICAgIGlmKF90aGlzLnBhbmNha2UgPj0gX3RoaXMub2F0TWVhbCl7CiAgICAgIHBhbmNha2VWYWxpZCA9IHRydWUKICAgIH1lbHNlewogICAgICBwYW5jYWtlVmFsaWQgPSBmYWxzZQogICAgfQoKICAgIGlmKF90aGlzLmVtZXJhbGQgPiBfdGhpcy5vYXRNZWFsKXsKICAgICAgZW1lcmFsZFZhbGlkID0gdHJ1ZQogICAgfWVsc2V7CiAgICAgIGVtZXJhbGRWYWxpZCA9IGZhbHNlCiAgICB9CgogICAgICBfdGhpcy5wYW5jYWtlX3ZhbGlkID0gcGFuY2FrZVZhbGlkLAogICAgICBfdGhpcy5lbWVyYWxkX3ZhbGlkID0gZW1lcmFsZFZhbGlkCgogICAgbGV0IHZhbGlkYXRlT2JqID0gcGFuY2FrZVZhbGlkICYmIGVtZXJhbGRWYWxpZAogICAgcmV0dXJuIHZhbGlkYXRlT2JqCiAgfSwKCiAgICBoYW5kbGVEYXRlQ2xpY2s6IGZ1bmN0aW9uKGFyZykgewogICAgICAvLyBjb25zb2xlLmxvZygiZGF0ZSBjbGljayAiLF90aGlzLm9wZW5BZGRfUHJvZ3JhbSk7CiAgICAgIAogICAgY29uc3QgdGVtcCA9IF90aGlzLmFycmF5T2ZQcm9nU3RhdGUuZmlsdGVyKGRhdGEgPT4gewogICAgICByZXR1cm4gZGF0YS5kYXRlID09PSBmb3JtYXRDdXN0b21EYXRlKGFyZy5kYXRlLCctJykKICAgIH0pCgogICAgY29uc3QgZW1wdHkgPSAiIjsKICAgIGNvbnN0IGRlZmF1bHREYXRlID0gYXJnLmRhdGU7CiAgICBjb25zdCBlbXB0eUxpc3QgPSBbXTsKICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpc0xvZ2dlZGluJykKICAgIGlmKGFyZy5kYXRlID4gbmV3IERhdGUoKSl7CiAgICAgIGlmKCEodGVtcC5sZW5ndGggPiAwKSl7CiAgICAgICAgewogICAgICAgICAgZ2V0VXNlckxpc3QodG9rZW4sbmV3IERhdGUoYXJnLmRhdGUpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgY29uc3QgdXNlcnMgPSByZXNwb25zZS5kYXRhLmRhdGEubWFwKChkYXRhKT0+ewogICAgICAgICAgICAgIHZhciBvYmogPSB7CiAgICAgICAgICAgICAgICBsYWJlbDogZGF0YS51c2VyX25hbWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YS51c2VyX2lkLAogICAgICAgICAgICAgICAgaWQgOiBkYXRhLnVzZXJfaWQKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIG9iagogICAgICAgICAgICB9KQogICAgICAgICAgICAgIF90aGlzLnVzZXJMaXN0ID0gdXNlcnMKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhfdGhpcy51c2VyTGlzdCk7CiAgICAgICAgICAgICAgCiAgICAgICAgICB9KQogICAgICAgICAgICAKICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoYXJnLmRhdGUpCiAgICAgICAgCiAgICAgICAgLy8gYmluZCB3aXRoIGFuIGFycm93IGZ1bmN0aW9uCiAgICAKICAgICAgICAgIF90aGlzLm9hdG1lYWxfdmFsaWQgICAgPSB0cnVlLAogICAgICAgICAgX3RoaXMuYmVlZl92YWxpZCAgICAgICA9IHRydWUsCiAgICAgICAgICBfdGhpcy5wYW5jYWtlX3ZhbGlkICAgID0gdHJ1ZSwKICAgICAgICAgIF90aGlzLmVtZXJhbGRfdmFsaWQgICAgPSB0cnVlLAogICAgICAgICAgX3RoaXMub3BlbkFkZF9Qcm9ncmFtICA9ICFfdGhpcy5vcGVuQWRkX1Byb2dyYW0sCiAgICAgICAgICBfdGhpcy5WZWhpY2xlVGl0bGUgICAgID0gZW1wdHksCiAgICAgICAgICBfdGhpcy5pc1N1Ym1pdCAgICAgICAgID0gdHJ1ZSwKICAgICAgICAgIF90aGlzLnNoaWZ0ICAgICAgICAgICAgPSB0cnVlLAogICAgICAgICAgX3RoaXMuc3RhcnQgICAgICAgICAgICA9IGRlZmF1bHREYXRlLAogICAgICAgICAgX3RoaXMuZW5kICAgICAgICAgICAgICA9IGRlZmF1bHREYXRlLAogICAgICAgICAgX3RoaXMuY3VycmVudERhdGUgICAgICA9IGN1cnJlbnREYXRlLAogICAgICAgICAgX3RoaXMuY2FsZW5kYXJFdmVudHMgICA9IGVtcHR5TGlzdCwKICAgICAgICAgIF90aGlzLnByb2dyYW1tX0FkZCAgICAgPSB0cnVlCiAgICAgICAgICBfdGhpcy5wZXJzb25zTGlzdCAgICAgID0gZW1wdHlMaXN0CiAgICAgICAgICAvLyBwZXJzb25JZDowCiAgICAgIH0KICAgICAgfWVsc2V7CiAgICAgICAgVG9hc3RzU3RvcmUuZXJyb3IoIk9ubHkgb25lIFByb2dyYW0gY2FuIGJlIGFkZCBhdCBwYXJ0aWN1bGFyIGRhdGUhIikKICAgICAgfQp9CmVsc2V7CiAgVG9hc3RzU3RvcmUuZXJyb3IoIlBsZWFzZSBzZWxlY3QgZnV0dXJlIGRhdGVzIG9ubHkgZm9yIGNyZWF0aW5nIFByb2dyYW1tZSEiKQp9Cn0sCgogICAgZXZlbnRDbGljazpmdW5jdGlvbihwcm9ncmFtKXsKICAgICAgICAKICAgIGNvbnN0IHJlbW92ZWRVc2VyTGlzdEFycmF5ID0gW10KICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2lzTG9nZ2VkaW4nKTsKICAgIAogICAgZ2V0UHJvZ3JhbW1lQnlJZCh0b2tlbixwYXJzZUludChwcm9ncmFtLmV2ZW50LmlkKSkudGhlbiggYXN5bmMgZnVuY3Rpb24ocmVzcG9uc2UpeyAgICAgIAogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgY29uc3QgdGVtcFByb2cgPSBbXQogICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YVswXQogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSkKICAgICAgCiAgICAgIGF3YWl0IGdldFVzZXJMaXN0KHRva2VuLGRhdGUpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgCiAgICAgICAgY29uc3QgdXNlcnMgPSByZXNwb25zZS5kYXRhLmRhdGEubWFwKChkYXRhKT0+ewogICAgICAgICAgdmFyIG9iaiA9IHsKICAgICAgICAgICAgbGFiZWw6IGRhdGEudXNlcl9uYW1lLAogICAgICAgICAgICB2YWx1ZTogZGF0YS51c2VyX2lkLAogICAgICAgICAgICBpZCA6IGRhdGEudXNlcl9pZAogICAgICAgICAgfSAgICAgICAgICAKICAgICAgICAgIHJldHVybiBvYmoKICAgICAgICB9KQogICAgICAgVnVlLnNldChfdGhpcy4kZGF0YSwndXNlckxpc3QnLHVzZXJzKSAKICAgICAgfSkKCiAgICAgIGNvbnN0IGV2ZW50cyA9IGRhdGEucHJvZ3JhbW1lc192ZWhpY2xlcy5tYXAodmVoaWNsZSA9PiB7CiAgICAgICAgY29uc3QgZWVsID0gX3RoaXMudXNlckxpc3QuZmlsdGVyKHVzZXIgPT4gewogICAgICAgICAgcmV0dXJuIHVzZXIuaWQgPT09IGRhdGEudXNlcl9pZAogICAgICAgIH0pCiAgICAgICAgCiAgICAgIHZhciBsaXN0ID0gdmVoaWNsZS5wcm9nX3ZlaGljbGVfdXNlcnMubWFwKHVzZXIgPT4gewogICAgICAgIGNvbnN0IG9iaiA9IHsKICAgICAgICAgIGxhYmVsOiB1c2VyLnVzZXIuZGlzcGxheV9uYW1lLAogICAgICAgICAgdmFsdWU6IHVzZXIudXNlcl9pZCwKICAgICAgICAgIGlkIDogdXNlci51c2VyX2lkCiAgICAgICAgfQogICAgICAgIHJldHVybiBvYmoKICAgICAgfSkKCiAgICBjb25zdCB2ZWhpY2xlcyA9IGRhdGEucHJvZ3JhbW1lc192ZWhpY2xlcy5tYXAodl9kYXRhID0+IHsgICAgICAKCiAgICAgIGNvbnN0IGFzc2luZ25lZFBlcnNvbiA9IHZfZGF0YS5wcm9nX3ZlaGljbGVfdXNlcnMubWFwKCh1c2VyKSA9PiB7CiAgICAgICAgY29uc3QgdGVtcCA9IHsKICAgICAgICAgIGxhYmVsOiB1c2VyLnVzZXIuZGlzcGxheV9uYW1lLAogICAgICAgICAgdmFsdWU6IHVzZXIudXNlci5kaXNwbGF5X25hbWUsCiAgICAgICAgICBpZCA6IHVzZXIudXNlcl9pZAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHRlbXAKICB9KQoKICBjb25zdCBlbWVyZ2VuY3lVc2VyID0gewogICAgbGFiZWw6ICB2X2RhdGEuc3VwcG9ydF91c2VyLmRpc3BsYXlfbmFtZSwgdmFsdWU6ICB2X2RhdGEuc3VwcG9ydF91c2VyX2lkLCBpZDogIHZfZGF0YS5zdXBwb3J0X3VzZXJfaWQKICB9CiAgLy8gY29uc29sZS5sb2coZW1lcmdlbmN5VXNlcik7CiAgCiAgLy8gY29uc3QgZW1lcmdlbmN5VXNlciA9IF90aGlzLnN0YXRlLnVzZXJMaXN0LmZpbHRlcih1c2VyTmFtZSA9PiB7CiAgICAKICAvLyAgIHJldHVybiB1c2VyTmFtZS5pZCA9PT0gdl9kYXRhLnN1cHBvcnRfdXNlcl9pZAogIC8vIH0pCiAgCiAgICAgIGNvbnN0IG9iaiA9IHsKICAgICAgICBkYXRlOl90aGlzLmN1cnJlbnREYXRlLAogICAgICAgIFZlaGljbGVUaXRsZTogdl9kYXRhLnRpdGxlLAogICAgICAgIHN0YXJ0OiBkYXRlT2JqRm9ybWF0dGVyKGRhdGUsdl9kYXRhLnZfc190KSwKICAgICAgICBlbmQ6IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSx2X2RhdGEudl9lX3QpLAogICAgICAgIGlkOiB2X2RhdGEudmVoaWNsZV9pZCwKICAgICAgICB2ZWhpY2xlTm86IHZfZGF0YS52ZWhpY2xlX25vLAogICAgICAgIGVlbFZhbCA6IGVtZXJnZW5jeVVzZXIubGFiZWwsCiAgICAgICAgcGVyc29uc0xpc3Q6Wy4uLmFzc2luZ25lZFBlcnNvbl0sCiAgICAgICAgZWVsSWQgOiB2X2RhdGEuc3VwcG9ydF91c2VyX2lkLAogICAgICAgIGxvY2F0aW9uVmFsOiB2X2RhdGEuYWRkaXRpb25hbF9pbmZvLAoKICAgICAgfQogICAgICByZXR1cm4gb2JqCiAgICB9KQogICAgCiAgICB0ZW1wUHJvZy5wdXNoKHsKICAgICAgdGl0bGU6IGRhdGEucHJvZ3JhbW1lc192ZWhpY2xlcy5sZW5ndGggKycgdmVoaWNsZXMnLAogICAgICBwcm9ncmFtbWVfaWQgOiBkYXRhLmlkLAogICAgICBkYXRlOmRhdGUsCiAgICAgIGVtZXJhbGQgOiBkYXRhLm9jdF9ldmVuaW5nICE9PSAiIiA/IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSxkYXRhLm9jdF9ldmVuaW5nKSA6IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSxkYXRhLm9jdF9tb3JuaW5nKSwKICAgICAgYmVlZiA6IGRhdGEudm10X2V2ZW5pbmcgIT09ICIiID8gZGF0ZU9iakZvcm1hdHRlcihkYXRlLGRhdGEudm10X2V2ZW5pbmcpIDogZGF0ZU9iakZvcm1hdHRlcihkYXRlLGRhdGEudm10X21vcm5pbmcpLAogICAgICBwYW5jYWtlIDogZGF0ZU9iakZvcm1hdHRlcihkYXRlLGRhdGEud3Nfb190aW1lKSwKICAgICAgIG9hdE1lYWwgOiBkYXRhLm9vdF9ldmVuaW5nICE9PSAiIiA/IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSxkYXRhLm9vdF9ldmVuaW5nKSA6IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSxkYXRhLm9vdF9tb3JuaW5nKSwKICAgICAgVmVoaWNsZXNMaXN0IDogWy4uLnZlaGljbGVzXQogICAgfSkKCiAgICAgICBjb25zdCBvYmogPSB7CiAgICAgICAgZGF0ZTpuZXcgRGF0ZShkYXRhLmRhdGUpLAogICAgICAgIFZlaGljbGVUaXRsZTogdmVoaWNsZS50aXRsZSwKICAgICAgICBzdGFydDogZGF0ZU9iakZvcm1hdHRlcihuZXcgRGF0ZSgpLHZlaGljbGUudl9zX3QpLAogICAgICAgIGVuZDogZGF0ZU9iakZvcm1hdHRlcihuZXcgRGF0ZSgpLHZlaGljbGUudl9lX3QpLAogICAgICAgIGlkOiB2ZWhpY2xlLnZlaGljbGVfaWQsCiAgICAgICAgdmVoaWNsZU5vOiB2ZWhpY2xlLnZlaGljbGVfbm8sCiAgICAgICAgcGVyc29uc0xpc3Q6IGxpc3QsCiAgICAgICAgZWVsSWQgOiB2ZWhpY2xlLnN1cHBvcnRfdXNlcl9pZCwKICAgICAgICBsb2NhdGlvblZhbDogdmVoaWNsZS5hZGRpdGlvbmFsX2luZm8sCiAgICAgICAgZWVsVmFsIDogdmVoaWNsZS5zdXBwb3J0X3VzZXIuZGlzcGxheV9uYW1lLAogICAgICAgIGN1cnJlbnRQcm9ncmFtbWVJZCA6IHByb2dyYW0uZXZlbnQuaWQsCiAgICAgICAgb3BlbkFkZF9Qcm9ncmFtIDogZmFsc2UKICAgICAgfQogICAgICByZXR1cm4gb2JqIAogICAgICB9KQoKICAgICAgICBfdGhpcy5vYXRtZWFsX3ZhbGlkID0gdHJ1ZSwKICAgICAgICBfdGhpcy5iZWVmX3ZhbGlkID0gdHJ1ZSwKICAgICAgICBfdGhpcy5wYW5jYWtlX3ZhbGlkID0gdHJ1ZSwKICAgICAgICBfdGhpcy5lbWVyYWxkX3ZhbGlkID0gdHJ1ZSwKICAgICAgICBfdGhpcy5wcm9ncmFtID0gdGVtcFByb2csCiAgICAgICAgX3RoaXMub3BlbkFkZF9Qcm9ncmFtPSAhX3RoaXMub3BlbkFkZF9Qcm9ncmFtLAogICAgICAgIF90aGlzLmlzRWRpdD0gdHJ1ZSwKICAgICAgICBfdGhpcy5pc1N1Ym1pdD0gZmFsc2UsCiAgICAgICAgX3RoaXMuY2FsZW5kYXJFdmVudHMgPSBbLi4uZXZlbnRzXSwgCiAgICAgICAgX3RoaXMucmVtb3ZlZFVzZXJMaXN0QXJyYXkgPSByZW1vdmVkVXNlckxpc3RBcnJheSwKICAgICAgICBfdGhpcy5iZWVmICAgID0gZGF0YS52bXRfZXZlbmluZyAhPT0gIiIgPyBkYXRlT2JqRm9ybWF0dGVyKGRhdGUsZGF0YS52bXRfZXZlbmluZykgOiBkYXRlT2JqRm9ybWF0dGVyKGRhdGUsZGF0YS52bXRfbW9ybmluZyksCiAgICAgICAgX3RoaXMuZW1lcmFsZCA9IGRhdGEub2N0X2V2ZW5pbmcgIT09ICIiID8gZGF0ZU9iakZvcm1hdHRlcihkYXRlLGRhdGEub2N0X2V2ZW5pbmcpIDogZGF0ZU9iakZvcm1hdHRlcihkYXRlLGRhdGEub2N0X21vcm5pbmcpLAogICAgICAgIF90aGlzLm9hdE1lYWwgPSBkYXRhLm9vdF9ldmVuaW5nICE9PSAiIiA/IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSxkYXRhLm9vdF9ldmVuaW5nKSA6IGRhdGVPYmpGb3JtYXR0ZXIoZGF0ZSxkYXRhLm9vdF9tb3JuaW5nKSwKICAgICAgICBfdGhpcy5wYW5jYWtlID0gZGF0ZU9iakZvcm1hdHRlcihkYXRlLGRhdGEud3Nfb190aW1lKSwKICAgICAgICBfdGhpcy5wcm9ncmFtbV9BZGQ9ZmFsc2UsCiAgICAgICAgX3RoaXMuZXZlbnRfZGF0ZSA9IGRhdGUsCiAgICAgICAgX3RoaXMuc2hpZnQgPSBkYXRhLm9jdF9ldmVuaW5nID09PSAiIiA/IHRydWUgOiBmYWxzZSwKICAgICAgICBfdGhpcy5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKGRhdGEuZGF0ZSkKCiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuYmVlZik7CiAgICAgICAgCiAgICAgCiAgICB9KQogICAgIC8vIGNvbnNvbGUubG9nKHR5cGVvZihfdGhpcy5zdGF0ZS5wZXJzb25JZCkpOwogICAgfSwKCiAgICBoYW5kbGVFZGl0IDogZnVuY3Rpb24oKSB7ICAgIAogICBpZihfdGhpcy5ldmVudF9kYXRlID4gbmV3IERhdGUoKSl7CgogICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaXNMb2dnZWRpbicpCiAgICAKICAgIGNvbnN0IGNsb25lUHJvZ3JhbSA9IFsuLi5fdGhpcy5wcm9ncmFtXQogICAgY29uc3QgZXZlbnRzID0gWy4uLl90aGlzLmNhbGVuZGFyRXZlbnRzXTsKCiAgICBjb25zdCB1cGRhdGVkUHJvZyA9IGNsb25lUHJvZ3JhbS5tYXAoaW5mbyA9PnsKCiAgICAgIGNvbnN0IG9iaiA9ewogICAgICAgIHRpdGxlOiBfdGhpcy5jYWxlbmRhckV2ZW50cy5sZW5ndGggKycgdmVoaWNsZXMnICwKICAgICAgICBwcm9ncmFtbWVfaWQgOiBpbmZvLnByb2dyYW1tZV9pZCwKICAgICAgICBkYXRlOl90aGlzLmN1cnJlbnREYXRlLAogICAgICAgIGVtZXJhbGQgOiBfdGhpcy5lbWVyYWxkLAogICAgICAgIGJlZWYgOiBfdGhpcy5iZWVmLAogICAgICAgIHBhbmNha2UgOiBfdGhpcy5wYW5jYWtlLAogICAgICAgIG9hdE1lYWwgOiBfdGhpcy5vYXRNZWFsLAogICAgICAgIFZlaGljbGVzTGlzdCA6IFsuLi5ldmVudHNdCiAgICAgIH0KICAgICAgcmV0dXJuIG9iagogICAgfSkgICAgCiAgICBldmVudHMubWFwKGV2ZW50ID0+IHsKICAgICAgcmV0dXJuIGV2ZW50W190aGlzLmV2ZW50U2VsZWN0SWRdOwogICAgfSk7CgogICAgdXBkYXRlUHJvZ3JhbSh0b2tlbix1cGRhdGVkUHJvZyxfdGhpcy5zaGlmdCxfdGhpcy5jYWxlbmRhckV2ZW50cyxfdGhpcy51cGRhdGVWZWhpY2xlSWQsX3RoaXMucmVtb3ZlZFVzZXJMaXN0QXJyYXkpCiAgICAudGhlbigoKT0+ewogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKGZhbHNlKTsKICAgIH0pCiAgICAvLyBldmVudHNbX3RoaXMuc3RhdGUuZXZlbnRTZWxlY3RJZF0gPSBuZXdFdmVudDsKCiAgICAgIF90aGlzLlZlaGljbGVzTGlzdCA9IGV2ZW50cywKICAgICAgX3RoaXMuYmVlZiA9IF90aGlzLmJlZWYsCiAgICAgIF90aGlzLmRhdGUgPSBfdGhpcy5jdXJyZW50RGF0ZSwKICAgICAgX3RoaXMuZW1lcmFsZCA9IF90aGlzLmVtZXJhbGQsCiAgICAgIF90aGlzLm9hdE1lYWwgPSBfdGhpcy5vYXRNZWFsLAogICAgICBfdGhpcy5wYW5jYWtlID0gX3RoaXMucGFuY2FrZSwKICAgICAgX3RoaXMudGl0bGU9IF90aGlzLmNhbGVuZGFyRXZlbnRzLmxlbmd0aCsnUHJvZ3JhbXMnICwKICAgICAgX3RoaXMub3BlbkFkZF9Qcm9ncmFtID0gZmFsc2UsCiAgICAgIF90aGlzLmlzbG9hZGluZyA9IHRydWUKICAgICAgX3RoaXMuaXNTdWJtaXQgPSBmYWxzZSwKICAgICAgX3RoaXMuaXNFZGl0ID0gZmFsc2UgICAgCiAgIH1lbHNlewogICAgIFRvYXN0c1N0b3JlLmVycm9yKCdGdXR1cmUgZXZlbnRzIGNhbiBvbmx5IGJlIGVkaXRlZCEnKQogICB9CiAgfSwKCiAgaGFuZGxlVGl0bGVDaGFuZ2U6ZnVuY3Rpb24oZXZlbnQpewogICAgY29uc3QgdGVtcFZhbCA9IGV2ZW50LnRhcmdldC52YWx1ZTsKICAgIC8vICBjb25zb2xlLmxvZyh0ZW1wVmFsKTsKICAgIGlmIChfdGhpcy5pc1N1Ym1pdCkgewogICAgICAgIF90aGlzLnRpdGxlX1ZhbGlkID0gdHJ1ZSwKICAgICAgICBfdGhpcy5WZWhpY2xlVGl0bGUgPSB0ZW1wVmFsCiAgICB9IGVsc2UgewogICAgICAgIF90aGlzLnRpdGxlX1ZhbGlkID0gdHJ1ZSwKICAgICAgICBfdGhpcy5WZWhpY2xlVGl0bGUgPSB0ZW1wVmFsCiAgICB9CiAgfSwKCiAgaGFuZGxlRWVsQ2hhbmdlIDogZnVuY3Rpb24oZSl7CiAgICAvLyBjb25zb2xlLmxvZyhlKTsKICAgICAgX3RoaXMuZWVsVmFsPSBlLAogICAgICBfdGhpcy5lZWxJZCA9IGUuaWQsCiAgICAgIF90aGlzLmVlbF9WYWxpZCA9IHRydWUKICB9LAoKICAgIGNsb3NlQWRkUHJvZ3JhbTpmdW5jdGlvbigpewogICAgICAgIF90aGlzLm9wZW5BZGRfUHJvZ3JhbSA9IGZhbHNlCiAgICB9LAoKICAgIGhhbmRsZUFkZFByb2dyYW06IGZ1bmN0aW9uKCl7CiAgICAgIAogICAgY29uc3QgdmFsaWRfcHJvZyA9IHRoaXMudmFsaWRhdGVQcm9ncmFtKCkKICAgIC8vIGNvbnNvbGUubG9nKHRlbXApOwoKaWYoX3RoaXMuY2FsZW5kYXJFdmVudHMubGVuZ3RoID4gMCAmJiB2YWxpZF9wcm9nKXsKICBpZihfdGhpcy5wYW5jYWtlX3ZhbGlkICYmIF90aGlzLm9hdG1lYWxfdmFsaWQgJiYgX3RoaXMuYmVlZl92YWxpZCAmJiBfdGhpcy5lbWVyYWxkX3ZhbGlkKXsKICAgICAgY29uc3QgcHJvZ3JhbSA9IFtdCgogICAgICBjb25zdCBldmVudHMgPSBbLi4uX3RoaXMuY2FsZW5kYXJFdmVudHNdOwogICAgICAvLyBjb25zdCBpZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICBwcm9ncmFtLnB1c2goewogICAgICAgIHRpdGxlOiBfdGhpcy5jYWxlbmRhckV2ZW50cy5sZW5ndGgrJyBWZWhpY2xlcycgLAogICAgICAgIGRhdGU6Zm9ybWF0Q3VzdG9tRGF0ZShfdGhpcy5jdXJyZW50RGF0ZSwnLScpLAogICAgICAgIG9hdE1lYWwgOiBmb3JtYXRDdXN0b21UaW1lKF90aGlzLm9hdE1lYWwsJzonKSwKICAgICAgICBiZWVmIDogZm9ybWF0Q3VzdG9tVGltZShfdGhpcy5iZWVmLCc6JyksCiAgICAgICAgcGFuY2FrZSA6IGZvcm1hdEN1c3RvbVRpbWUoX3RoaXMucGFuY2FrZSwnOicpLAogICAgICAgIGVtZXJhbGQgOiBmb3JtYXRDdXN0b21UaW1lKF90aGlzLmVtZXJhbGQsJzonKSwKICAgICAgICBWZWhpY2xlc0xpc3QgOiBbLi4uZXZlbnRzXQogICAgICB9KTsKICAKICAgICAgYXJyYXlPZlByb2cgPSBbLi4ucHJvZ3JhbSwuLi5hcnJheU9mUHJvZ10KICAgICAgCiAgICAgICAgX3RoaXMucHJvZ3JhbSAgICAgICAgICAgICAgID0gcHJvZ3JhbSwKICAgICAgICBfdGhpcy5hcnJheU9mUHJvZ1N0YXRlICAgICAgPSBhcnJheU9mUHJvZywKICAgICAgICBfdGhpcy5vcGVuQWRkX1Byb2dyYW0gICAgICAgPSBmYWxzZSwKICAgICAgICBfdGhpcy5pc1N1Ym1pdCAgICAgICAgICAgICAgPSBmYWxzZSwKICAgICAgICBfdGhpcy5pc0VkaXQgICAgICAgICAgICAgICAgPSBmYWxzZSwKICAgICAgICBfdGhpcy5wcm9ncmFtbV9BZGQgICAgICAgICAgPWZhbHNlCiAgICAgIAogICAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdpc0xvZ2dlZGluJykKICAgICAgY3JlYXRlUHJvZ3JhbSh0b2tlbixwcm9ncmFtLF90aGlzLnNoaWZ0LF90aGlzLmNhbGVuZGFyRXZlbnRzLF90aGlzLnBlcnNvbnNMaXN0KQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZChmYWxzZSk7CiAgICAgIH0pCgogICAgICAgIF90aGlzLnBlcnNvbnNMaXN0ID0gX3RoaXMucGVyc29uc0xpc3QKICAKICAgIH0KfWVsc2V7CiAgLy8gVG9hc3RzU3RvcmUuZXJyb3IoInBsZWFzZSBhZGQgYXRsZWFzdCBvbmUgdmVoaWNsZSB0byBhZGQgcHJvZ3JhbSEgIikgOwp9CiB9LAogICAgb3BlbkFkZFZlaGljbGU6ZnVuY3Rpb24oKXsgICAKICAgICAgCiAgICAgIGNvbnN0IGxpc3QgPSBfdGhpcy51c2VyTGlzdC5maWx0ZXIoKGRhdGEpID0+IHsKICAgICAgcmV0dXJuIF90aGlzLmZ1bGxMaXN0LmZpbmRJbmRleCh1c2VyID0+IGRhdGEuaWQgPT09IHVzZXIuaWQpIDwgMAogICAgIH0pICAgICAgCgogICAgICBfdGhpcy5WZWhpY2xlVGl0bGUgICAgID0gIiIsCiAgICAgIF90aGlzLnN0YXJ0ICAgICAgICAgICAgPSBuZXcgRGF0ZSgpLAogICAgICBfdGhpcy5lbmQgICAgICAgICAgICAgID0gbmV3IERhdGUoKSwKICAgICAgX3RoaXMuaWQgICAgICAgICAgICAgICA9IDAsCiAgICAgIF90aGlzLnZlaGljbGVObyAgICAgICAgPSAiIiwKICAgICAgX3RoaXMuYXZhaWxPcHRpb25zICAgICA9IGxpc3QsCiAgICAgIF90aGlzLmVlbFZhbCAgICAgICAgICAgPSB7fSwKICAgICAgX3RoaXMucGVyc29uc0xpc3QgICAgICA9IFtdLAogICAgICBfdGhpcy5lZWxJZCAgICAgICAgICAgID0gMCwKICAgICAgX3RoaXMubG9jYXRpb25WYWwgICAgICA9ICIiLAogICAgICBfdGhpcy5pc1ZlaGljbGVBZGQgICAgID0gdHJ1ZSwKICAgICAgX3RoaXMuZGF0ZV9WYWxpZCAgICAgICA9IHRydWUsCiAgICAgIF90aGlzLnRpdGxlX1ZhbGlkICAgICAgPSB0cnVlLAogICAgICBfdGhpcy52ZWhpY2xlX1ZhbGlkICAgID0gdHJ1ZSwKICAgICAgX3RoaXMuZWVsX1ZhbGlkICAgICAgICA9IHRydWUsCiAgICAgIF90aGlzLmxvY2F0aW9uX3ZhbGlkICAgPSB0cnVlLAogICAgICBfdGhpcy5wZXJzb25MaXN0X3ZhbGlkID0gdHJ1ZQoKICAgICAgX3RoaXMudmFsaWQgPSBmYWxzZQogICAgICBfdGhpcy5vcGVuQWRkX1ZlaGljbGVEbGlvZyA9IHRydWUgIAoKICAgICAgLy8gY29uc29sZS5sb2coIm9wZW4gYWRkIHZlaGljbGUiLF90aGlzLmF2YWlsT3B0aW9ucyk7CiAgICAgICAgICAKICAgIH0sICAKaGFuZGxlQ2xvc2VWZWhpY2xlOmZ1bmN0aW9uKCl7ICAKICAgICAgX3RoaXMub3BlbkFkZF9WZWhpY2xlRGxpb2cgPSBmYWxzZQogICAgLy8gICBjb25zb2xlLmxvZygiY2xvc2VBZGRWZWhpY2xlIGhpdCBiZWZvcmUgIixfdGhpcy5vcGVuQWRkX1ZlaGljbGVEbGlvZykgIDsKICAgIC8vICBfdGhpcy4kc2V0KF90aGlzLiRkYXRhLCdvcGVuQWRkX1ZlaGljbGVEbGlvZycsZmFsc2UpICAKICAgICAgLy8gY29uc29sZS5sb2coImhhbmRsZUNsb3NlVmVoaWNsZSBoaXQgYWZ0ZXIiLF90aGlzLm9wZW5BZGRfVmVoaWNsZURsaW9nKTsgIAogICAgfSwgIAoKICAgIHZhbGlkYXRlVmVoaWNsZTpmdW5jdGlvbigpewoKbGV0IHRpdGxlVmFsaWQgPSBmYWxzZQpsZXQgZGF0ZVZhbGlkID0gZmFsc2UKbGV0IGVlbFZhbGlkID0gZmFsc2UKbGV0IHZlaGljbGVWYWxpZCA9IGZhbHNlCmxldCBsb2NhdGlvblZhbGlkID0gZmFsc2UKbGV0IHBlcnNvblZhbGlkID0gZmFsc2UKICBpZihfdGhpcy5WZWhpY2xlVGl0bGUpewogICAgdGl0bGVWYWxpZCA9IHRydWUKfWVsc2V7CiAgdGl0bGVWYWxpZCA9ZmFsc2UKfQoKaWYobmV3IERhdGUoX3RoaXMuZW5kKSA+IG5ldyBEYXRlKF90aGlzLnN0YXJ0KSl7CiAgICBkYXRlVmFsaWQgPSB0cnVlCn1lbHNlewogIGRhdGVWYWxpZCA9IGZhbHNlCn0KCmlmKF90aGlzLmVlbFZhbCl7CiAgZWVsVmFsaWQgPSB0cnVlCn1lbHNlewogIGVlbFZhbGlkID0gZmFsc2UKfQoKaWYoX3RoaXMudmVoaWNsZU5vKXsKICB2ZWhpY2xlVmFsaWQgPSB0cnVlCn1lbHNlewogIHZlaGljbGVWYWxpZCA9IGZhbHNlCn0KCmlmKF90aGlzLmxvY2F0aW9uVmFsLmxlbmd0aD4wKXsKICBsb2NhdGlvblZhbGlkID0gdHJ1ZQp9ZWxzZXsKICBsb2NhdGlvblZhbGlkID0gZmFsc2UKfQoKaWYoX3RoaXMucGVyc29uc0xpc3QubGVuZ3RoPjApewogIHBlcnNvblZhbGlkID0gdHJ1ZQp9ZWxzZXsKICBwZXJzb25WYWxpZCA9IGZhbHNlCn0KCiAgX3RoaXMudGl0bGVfVmFsaWQgICAgICA9IHRpdGxlVmFsaWQsCiAgX3RoaXMuZGF0ZV9WYWxpZCAgICAgICA9IGRhdGVWYWxpZCwKICBfdGhpcy5lZWxfVmFsaWQgICAgICAgID0gZWVsVmFsaWQsCiAgX3RoaXMudmVoaWNsZV9WYWxpZCAgICA9IHZlaGljbGVWYWxpZCwKICBfdGhpcy5sb2NhdGlvbl92YWxpZCAgID0gbG9jYXRpb25WYWxpZCwKICBfdGhpcy5wZXJzb25MaXN0X3ZhbGlkID0gcGVyc29uVmFsaWQKCgpsZXQgdmFsaWRhdGVPYmogPSAgdGl0bGVWYWxpZCAmJiBkYXRlVmFsaWQgJiYgZWVsVmFsaWQgJiYgdmVoaWNsZVZhbGlkICYmIGxvY2F0aW9uVmFsaWQgJiYgcGVyc29uVmFsaWQKCnJldHVybiB2YWxpZGF0ZU9iagoKICAgIH0sCgogICAgaGFuZGxlQWRkRXZlbnQ6ZnVuY3Rpb24oKXsgICAgCiAgICB2YXIgdGVtcCA9IF90aGlzLnZhbGlkYXRlVmVoaWNsZSgpICAgIAogICAgCmNvbnNvbGUubG9nKCJ0aXRsZVZhbGlkIixfdGhpcy50aXRsZV9WYWxpZCk7CmNvbnNvbGUubG9nKCJkYXRlVmFsaWQiLF90aGlzLmRhdGVfVmFsaWQpOwpjb25zb2xlLmxvZygiZWVsVmFsaWQiLF90aGlzLmVlbF9WYWxpZCk7CmNvbnNvbGUubG9nKCJ2ZWhpY2xlVmFsaWQiLF90aGlzLnZlaGljbGVfVmFsaWQpOwpjb25zb2xlLmxvZygibG9jYXRpb25WYWxpZCIsX3RoaXMubG9jYXRpb25fdmFsaWQpOwpjb25zb2xlLmxvZygicGVyc29uVmFsaWQiLF90aGlzLnBlcnNvbkxpc3RfdmFsaWQpOwoKICAgICB2YWxpZCA9IHRlbXAgJiYgX3RoaXMudGl0bGVfVmFsaWQgJiYgX3RoaXMuZGF0ZV9WYWxpZCAmJiBfdGhpcy5lZWxfVmFsaWQgJiYgX3RoaXMudmVoaWNsZV9WYWxpZCAmJiBfdGhpcy5sb2NhdGlvbl92YWxpZCAmJiBfdGhpcy5wZXJzb25MaXN0X3ZhbGlkCiAgICAvLyB2YXIgdmFsaWQgPSB0cnVlICAKICAgIGlmICh2YWxpZCkgeyAgCiAgICAgIGNvbnN0IGV2ZW50cyA9IFsuLi5fdGhpcy5jYWxlbmRhckV2ZW50c107ICAKICAgICAgICAKICAgICAgY29uc3QgdGVtcGxpc3QgPSBbLi4uX3RoaXMuZnVsbExpc3QsIC4uLl90aGlzLnBlcnNvbnNMaXN0XSAgCiAgCiAgICAgIGV2ZW50cy5wdXNoKHsgIAogICAgICAgIGRhdGU6X3RoaXMuY3VycmVudERhdGUsICAKICAgICAgICBWZWhpY2xlVGl0bGU6IF90aGlzLlZlaGljbGVUaXRsZSwgIAogICAgICAgIHN0YXJ0OiBfdGhpcy5zdGFydCwKICAgICAgICBlbmQ6IF90aGlzLmVuZCwKICAgICAgICBpZDogX3RoaXMuaWQsCiAgICAgICAgdmVoaWNsZU5vOiBfdGhpcy52ZWhpY2xlTm8sCiAgICAgICAgcGVyc29uc0xpc3Q6IF90aGlzLnBlcnNvbnNMaXN0LAogICAgICAgIGVlbElkIDogX3RoaXMuZWVsSWQsCiAgICAgICAgbG9jYXRpb25WYWw6IF90aGlzLmxvY2F0aW9uVmFsLAogICAgICAgIGVlbFZhbDogX3RoaXMuZWVsVmFsLmxhYmVsCiAgICAgIH0pOwogICAgICAgCiAgICAgICAgX3RoaXMuY2FsZW5kYXJFdmVudHMgICAgICA9IGV2ZW50cywKICAgICAgICBfdGhpcy5pc1N1Ym1pdCAgICAgICAgICAgID0gdHJ1ZSwKICAgICAgICBfdGhpcy5pc0VkaXQgICAgICAgICAgICAgID0gZmFsc2UsCiAgICAgICAgX3RoaXMub3BlbkFkZF9WZWhpY2xlRGxpb2c9IGZhbHNlLAogICAgICAgIF90aGlzLmlkICAgICAgICAgICAgICAgICAgPSBfdGhpcy5pZCArIDEsCiAgICAgICAgX3RoaXMuZWVsVmFsICAgICAgICAgICAgICA9IF90aGlzLmVlbFZhbCwKICAgICAgICBfdGhpcy5mdWxsTGlzdCAgICAgICAgICAgID0gdGVtcGxpc3QsCiAgICAgICAgX3RoaXMucGVyc29uc0xpc3QgICAgICAgICA9IF90aGlzLnBlcnNvbnNMaXN0LAogICAgICAgIF90aGlzLnRpdGxlX1ZhbGlkICAgICAgICAgPSBmYWxzZSwKICAgICAgICBfdGhpcy52ZWhpY2xlX1ZhbGlkICAgICAgID0gZmFsc2UsCiAgICAgICAgX3RoaXMuZGF0ZV9WYWxpZCAgICAgICAgICA9IGZhbHNlLAogICAgICAgIF90aGlzLmVlbF9WYWxpZCAgICAgICAgICAgPSBmYWxzZSwKICAgICAgICBfdGhpcy5sb2NhdGlvbl92YWxpZCAgICAgID0gZmFsc2UsCiAgICAgICAgX3RoaXMucGVyc29uTGlzdF92YWxpZCAgICA9IGZhbHNlCgogICAgICBjb25zb2xlLmxvZyhfdGhpcy5jYWxlbmRhckV2ZW50cyk7CiAgICB9IGVsc2V7CiAgICAgIC8vIHZhciBpbnAgPSAhdGhpcy5zdGF0ZS5kYXRlX1ZhbGlkID8gIlRpbWUgc2hvdWxkIGJlIGRpZmZlcmVudCAmIGdyZWF0ZXIgdGhhbiBzdGFydCB0aW1lIiA6IG51bGwKICAgIH0KICAgIH0sCgogIG9wZW5FZGl0IDogZnVuY3Rpb24oZGF0YSl7CiAgICAvLyBjb25zb2xlLmxvZyhkYXRlKTsgCiAgICAKICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgCiAgICBjb25zdCB2X2lkID0gWy4uLl90aGlzLnVwZGF0ZVZlaGljbGVJZF0KCiAgY29uc3QgdmVoaWNsZUlkID0gX3RoaXMuY2FsZW5kYXJFdmVudHMuZmlsdGVyKHZlaGljbGUgPT4gewogICAgICAgICAgICByZXR1cm4gdmVoaWNsZS52ZWhpY2xlTm8gPT09IGRhdGEudl9ubwogIH0pCiAgICAgIHZfaWQucHVzaCh2ZWhpY2xlSWRbMF0uaWQpCgogICAgICAvLyBsZXQgZWRpdGVkVmVoaWNsZUxpc3QgPSB2X2lkLmZpbHRlcigodixpKSA9PiB2X2lkLmluZGV4T2YodikgPT09IGkpCiAgICAgIC8vIGNvbnNvbGUubG9nKHgpOwogICAgICAKICAgIGNvbnN0IGxpc3QgPSBkYXRhLnBlcnNvbnMuc3BsaXQoIiwiKSAgICAKICAgICAgY29uc3QgYXNzaW5nbmVkUGVyc29uID0gX3RoaXMudXNlckxpc3QuZmlsdGVyKChkYXRhKSA9PiB7CiAgICAgICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHVzZXIgPT4gZGF0YS52YWx1ZS50b1N0cmluZygpID09PSB1c2VyKSAhPT0gLTEKICB9KSAgICAKICAvLyBjb25zb2xlLmxvZyhhc3NpbmduZWRQZXJzb24pOwoKICBsZXQgZWVsID0gX3RoaXMudXNlckxpc3QuZmlsdGVyKCh1c2VyKSA9PiB7CiAgICByZXR1cm4gdXNlci5sYWJlbCA9PT0gZGF0YS5lZWwKICB9KQogIC8vIGNvbnNvbGUubG9nKGVlbCk7CgogIGNvbnN0IEF2YWlsX09wdCA9IF90aGlzLnVzZXJMaXN0LmZpbHRlcigoZGF0YSkgPT4gewogICAgcmV0dXJuIF90aGlzLmZ1bGxMaXN0LmZpbmRJbmRleCh1c2VyID0+IGRhdGEuaWQgPT09IHVzZXIuaWQpIDwgMAogICB9KSAKIAogICAgICBfdGhpcy5kZWZhdWx0RWVsVmFsICAgICAgICA9IGVlbC5sYWJlbCwKICAgICAgX3RoaXMuZWVsVmFsICAgICAgICAgICAgICAgPSBlZWxbMF0sCiAgICAgIF90aGlzLmVlbElkICAgICAgICAgICAgICAgID0gZWVsLmlkLAogICAgICBfdGhpcy5zdGFydCAgICAgICAgICAgICAgICA9IGRhdGVPYmpGb3JtYXR0ZXIoX3RoaXMuY3VycmVudERhdGUsZGF0YS52X21vdmVfc3RhcnQpLAogICAgICBfdGhpcy5lbmQgICAgICAgICAgICAgICAgICA9IGRhdGVPYmpGb3JtYXR0ZXIoX3RoaXMuY3VycmVudERhdGUsZGF0YS52X21vdmVfZW5kKSwKICAgICAgX3RoaXMubG9jYXRpb25WYWwgICAgICAgICAgPSBkYXRhLmxvY2F0aW9uLAogICAgICBfdGhpcy5wZXJzb25zTGlzdCAgICAgICAgICA9IGFzc2luZ25lZFBlcnNvbiwKICAgICAgX3RoaXMuVmVoaWNsZVRpdGxlICAgICAgICAgPSBkYXRhLnRpdGxlLAogICAgICBfdGhpcy52ZWhpY2xlTm8gICAgICAgICAgICA9IGRhdGEudl9ubywKICAgICAgX3RoaXMuaXNWZWhpY2xlQWRkICAgICAgICAgPSBmYWxzZSwKICAgICAgX3RoaXMuZGF0ZV9WYWxpZCAgICAgICAgICAgPSB0cnVlLAogICAgICBfdGhpcy50aXRsZV9WYWxpZCAgICAgICAgICA9IHRydWUsCiAgICAgIF90aGlzLmVlbF9WYWxpZCAgICAgICAgICAgID0gdHJ1ZSwKICAgICAgX3RoaXMudmVoaWNsZV9WYWxpZCAgICAgICAgPSB0cnVlLAogICAgICBfdGhpcy5sb2NhdGlvbl92YWxpZCAgICAgICA9IHRydWUsCiAgICAgIF90aGlzLnBlcnNvbkxpc3RfdmFsaWQgICAgID0gdHJ1ZSwKICAgICAgX3RoaXMudXBkYXRlVmVoaWNsZUlkICAgICAgPSB2X2lkLAogICAgICBfdGhpcy5jdXJyZW50VmVoaWNsZUlkICAgICA9IHZlaGljbGVJZFswXS5pZAogICAgCiAgICAgIF90aGlzLm9wZW5BZGRfVmVoaWNsZURsaW9nID0gdHJ1ZSwKICAgICAgX3RoaXMuYXZhaWxPcHRpb25zICAgICAgICAgPSAgQXZhaWxfT3B0CiAgICAgICAgICAvLyBlZWxWYWw6IGRhdGEuZWVsLAogICAgfSwKCiAgICAgIGRhdGV0aW1laGFuZGxlIDogZnVuY3Rpb24oZGF0YSl7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgaWYoZGF0YS5pZCA9PT0gMSl7CiAgICAgICAgICBjb25zb2xlLmxvZygib2F0bWVhbCIpOwogICAgICAgICAgX3RoaXMub2F0TWVhbCA9IG5ldyBEYXRlKGRhdGEudGltZSkKICAgICAgICAgIF90aGlzLm9hdG1lYWxfdmFsaWQgPSB0cnVlICAgICAgICB9CiAgICAgICAgaWYoZGF0YS5pZCA9PT0gMiApewogICAgICAgICAgY29uc29sZS5sb2coInBhbmNha2UgIik7CiAgICAgICAgICBpZihuZXcgRGF0ZShkYXRhLnRpbWUpID49IG5ldyBEYXRlKF90aGlzLm9hdE1lYWwpKXsKICAgICAgICAgIF90aGlzLnBhbmNha2UgPSBuZXcgRGF0ZShkYXRhLnRpbWUpCiAgICAgICAgICBfdGhpcy5wYW5jYWtlX3ZhbGlkID0gdHJ1ZSAgICAgICAgfQogICAgICAgIH1pZihkYXRhLmlkID09PSAzKXsKICAgICAgICAgIGNvbnNvbGUubG9nKCJiZWVmICIpOwogICAgICAgICAgX3RoaXMuYmVlZiA9IG5ldyBEYXRlKGRhdGEudGltZSkKICAgICAgICAgIF90aGlzLmJlZWZfdmFsaWQgPSB0cnVlICAgICAgICB9CiAgICAgICAgaWYoZGF0YS5pZCA9PSA0KXsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlbWVyYWxkICIpOwogICAgICAgICAgaWYobmV3IERhdGUoZGF0YS50aW1lKSA+IG5ldyBEYXRlKF90aGlzLm9hdE1lYWwpKXsKICAgICAgICAgIF90aGlzLmVtZXJhbGQgPSBuZXcgRGF0ZShkYXRhLnRpbWUpCiAgICAgICAgICBfdGhpcy5lbWVyYWxkX3ZhbGlkID0gdHJ1ZSAgICAgICAgCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKGRhdGEuaWQgPT0gNSl7ICAgICAgICAgIAogICAgICAgICAgaWYobmV3IERhdGUoZGF0YS50aW1lKSA8IG5ldyBEYXRlKF90aGlzLmVuZCkgJiYgbmV3IERhdGUoZGF0YS50aW1lKSAhPT0gbmV3IERhdGUoX3RoaXMuZW5kKSl7CiAgICAgICAgICBjb25zb2xlLmxvZygic3RhcnQgdGltZSAiKTsKICAgICAgICAgIF90aGlzLnN0YXJ0ID0gbmV3IERhdGUoZGF0YS50aW1lKQogICAgICAgICAgX3RoaXMuZGF0ZV9WYWxpZCA9IHRydWUKICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmKGRhdGEuaWQgPT0gNil7CiAgICAgICAgICBpZihuZXcgRGF0ZShkYXRhLnRpbWUpID4gbmV3IERhdGUoX3RoaXMuc3RhcnQpICYmIG5ldyBEYXRlKGRhdGEudGltZSkgIT09IG5ldyBEYXRlKF90aGlzLnN0YXJ0KSl7CiAgICAgICAgICBfdGhpcy5lbmQgPSBuZXcgRGF0ZShkYXRhLnRpbWUpCiAgICAgICAgICBfdGhpcy5kYXRlX1ZhbGlkID0gdHJ1ZQogICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCgogICAgICB2ZWhpY2xlTm9IYW5kbGVyOiBmdW5jdGlvbihkYXRhKXsKICAgICAgICBjb25zdCB0ZW1wTm8gPSBkYXRhLnRhcmdldC52YWx1ZSAKICAgICAgICAgIHNjaGVtYQogICAgICAgIC5oYXMoKS5ub3QoKS5zeW1ib2xzKCkKICAgICAgICAuaGFzKCkubm90KCkuc3BhY2VzKCkKCiAgICAgICAgICBpZiAoc2NoZW1hLnZhbGlkYXRlKHRlbXBObykpIHsKICAgICAgICAgICAgICBfdGhpcy52ZWhpY2xlTm8gICAgID0gdGVtcE5vLAogICAgICAgICAgICAgIF90aGlzLnZlaGljbGVfVmFsaWQgPSB0cnVlCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBUb2FzdHNTdG9yZS5lcnJvcigiZW50ZXIgdmFsaWQgdmVoaWNsZSBudW1iZXIiKQogICAgICAgICAgICAgIF90aGlzLnZlaGljbGVfVmFsaWQgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgIH0sCgogICBoYW5kbGVMb2NhdGlvbkNoYW5nZTpmdW5jdGlvbihlKXsKCiAgICAvLyBjb25zb2xlLmxvZyhlLnRhcmdldC52YWx1ZSk7CiAgICBjb25zdCB0ZW1wVmFsID0gZS50YXJnZXQudmFsdWUKCiAgICAgIF90aGlzLmxvY2F0aW9uVmFsPSB0ZW1wVmFsLAogICAgICBfdGhpcy5sb2NhdGlvbl92YWxpZCA9IHRydWUKIAogICAgICB9LAoKICAgaGFuZGxlVXNlckNoYW5nZSA6IGZ1bmN0aW9uKGRhdGEpewpjb25zb2xlLmxvZygiaGFuZGxlIHVzZXIgY2hhbmdlICIsZGF0YSk7CgogICAgbGV0IGRpZmZlcmVuY2UgPSBfdGhpcy5wZXJzb25zTGlzdC5maWx0ZXIoeCA9PiBkYXRhICE9PSBudWxsID8gIWRhdGEuaW5jbHVkZXMoeCkgOiBfdGhpcy5wZXJzb25zTGlzdCkgIC8vIGNhbGN1bGF0ZXMgZGlmZgoKICAgIHJlbW92ZWRMaXN0ID0gWy4uLnJlbW92ZWRMaXN0LC4uLmRpZmZlcmVuY2VdCgogICAgcmVtb3ZlZExpc3QgPSByZW1vdmVkTGlzdC5maWx0ZXIoKHYsaSkgPT4gcmVtb3ZlZExpc3QuaW5kZXhPZih2KSA9PT0gaSkKICAgIC8vIGNvbnNvbGUubG9nKHJlbW92ZWRMaXN0KTsKICAgIAogICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKXsKICAgICAgICBfdGhpcy5wZXJzb25MaXN0X3ZhbGlkID0gdHJ1ZSwKICAgICAgIC8vIHZhbHVlOnRlbXAKICAgICAgICBfdGhpcy5wZXJzb25zTGlzdCA9IFsuLi5kYXRhXQogICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5wZXJzb25zTGlzdCA9IFtdCiAgICB9CiAgfQogIH0KfSk7Cg=="},{"version":3,"sources":["calendar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"calendar.vue","sourceRoot":"src/containers/calendar","sourcesContent":["<template>\n<div>\n  <FullCalendar\n    defaultView           = \"dayGridMonth\"\n    ref                   = \"fullCalendar\"\n    :eventTextColor       = \"eventColor\"\n    :plugins              = \"calendarPlugins\"\n    :draggable            = \"true\"\n    :droppable            = \"true\"\n    :editable             = \"true\"\n    :config               = \"config\"\n    :displayEventTime     = \"false\"\n    :fixedWeekCount       = \"false\"\n    @dateClick            = \"handleDateClick\"\n    @eventClick           = \"eventClick\"\n    :events               = \"arrayOfProgState\"\n  />\n  <AddProgram \n  v-if                    = \"programm_Add\"\n  v-bind:btn2             = \"'Submit'\"\n  event                   = \"Add Program\"\n  v-bind:currentDate      = \"currentDate | filterCustomDate('-')\"\n  v-bind:shift            = \"shift\"\n  v-bind:openAdd_Program  = \"openAdd_Program\"\n  v-bind:submitAddProgram = \"handleAddProgram\"\n  v-bind:closeAddProgram  = \"closeAddProgram\"\n  v-bind:openAddVehicle   = \"openAddVehicle\"\n  v-bind:oatMeal          = \"oatMeal | formatCustomTime(':')\"\n  v-bind:beef             = \"beef | formatCustomTime(':')\"\n  v-bind:pancake          = \"pancake | formatCustomTime(':')\"\n  v-bind:emerald          = \"emerald | formatCustomTime(':')\"\n  v-bind:calendarEvents   = \"calendarEvents\"\n\n  v-on:handletimechange_  = \"datetimehandle($event)\"\n  />\n\n  <AddProgram \n  v-else\n  v-bind:btn2             = \"'Edit'\"\n  event                   = \"Add Program\"\n  v-bind:currentDate      = \"currentDate | filterCustomDate('-')\"\n  v-bind:shift            = \"shift\"\n  v-bind:openAdd_Program  = \"openAdd_Program\"\n  v-bind:submitAddProgram = \"handleEdit\"\n  v-bind:closeAddProgram  = \"closeAddProgram\"\n  v-bind:openAddVehicle   = \"openAddVehicle\"\n  v-bind:oatMeal          = \"oatMeal | formatCustomTime(':')\"\n  v-bind:beef             = \"beef | formatCustomTime(':')\"\n  v-bind:pancake          = \"pancake | formatCustomTime(':')\"\n  v-bind:emerald          = \"emerald | formatCustomTime(':')\"\n  v-bind:calendarEvents   = \"calendarEvents\"\n  \n  v-on:handletimechange_  = \"datetimehandle($event)\"\n  />\n\n  <!-- v-bind:editHandler      = \"openEdit($event)\" -->\n\n            <!-- openAdd_Program=openAdd_Program\n            \n            pancake_error = {!_this.state.pancake_valid}\n            emerald_error = {!_this.state.emerald_valid}\n\n            editHandler = {(e,date,myPersonList)=>_this.openEdit(e,date,myPersonList)}\n\n            handleSubmit={_this.state.programm_Add ? _this.handleAddProgram : _this.handleEdit}\n\n            btn1=\"Cancel\"\n            btn2={_this.state.programm_Add ? \"Submit\" : \"Edit\"}\n\n            // Component props for Select time\n            handletimechange={(date,id) => _this.handletimechange(date,id)}\n            timeValue={_this.state.timeValue}\n\n            //Component Props for Add Person Dilouge\n            openAddVehicle={_this.openAddVehicle} -->\n\n<!-- <AddProgram \n  v-else\n  event = \"Edit Program\"\n  v-bind:showAddProgram = \"showAddProgram\"\n  v-bind:submitAddProgram=\"submitAddProgram\"\n  v-bind:closeAddProgram=\"closeAddProgram\"\n  v-bind:openAddVehicle=\"openAddVehicle\"\n  \n  /> -->\n\n<AddVehicle \nv-if=\"isVehicleAdd\"\nv-bind:title_error=\"title_Valid\"\nv-bind:endTime_error=\"date_Valid\"\nv-bind:eel_error=\"eel_Valid\"\nv-bind:vehicle_error=\"vehicle_Valid\"\nv-bind:location_error=\"location_valid\"\nv-bind:personList_error=\"personList_valid\"\n\nv-bind:openAdd_VehicleDliog = \"openAdd_VehicleDliog\"\nv-bind:title = \"VehicleTitle\"\nv-bind:handleTitleChange = \"handleTitleChange\"\nv-bind:start_time = \"start | formatCustomTime(':')\"\nv-on:handletimechange_ = \"datetimehandle($event)\"\nv-bind:end_time = \"end | formatCustomTime(':')\"\nv-bind:eelVal = \"eelVal\"\nv-bind:handleEelChange = \"handleEelChange\"\nv-bind:v_no = \"vehicleNo\"\nv-bind:vehicleNoHandler = \"vehicleNoHandler\"\nv-bind:location = \"locationVal\"\nv-bind:handleLocationChange = \"handleLocationChange\"\nv-bind:persons = \"availOptions\"\nv-bind:selectedPersons=\"personsList\"\nv-bind:handleUserChange = \"handleUserChange\"\nv-bind:handleSubmit = \"handleAddEvent\"\nv-bind:handleCloseVehicle = \"handleCloseVehicle\"\nv-bind:addVehicleBtnSubmit=\"'Submit'\"\n/>\n\n<AddVehicle \nv-else\nv-bind:title_error=\"title_Valid\"\nv-bind:endTime_error=\"date_Valid\"\nv-bind:eel_error=\"eel_Valid\"\nv-bind:vehicle_error=\"vehicle_Valid\"\nv-bind:location_error=\"location_valid\"\nv-bind:personList_error=\"personList_valid\"\n\nv-bind:openAdd_VehicleDliog = \"openAdd_VehicleDliog\"\nv-bind:title = \"VehicleTitle\"\nv-bind:handleTitleChange = \"handleTitleChange\"\nv-bind:start_time = \"start | formatCustomTime(':')\"\nv-on:handletimechange_ = \"datetimehandle($event)\"\nv-bind:end_time = \"end | formatCustomTime(':')\"\nv-bind:eelVal = \"eelVal\"\nv-bind:handleEelChange = \"handleEelChange\"\nv-bind:v_no = \"vehicleNo\"\nv-bind:vehicleNoHandler = \"vehicleNoHandler\"\nv-bind:location = \"locationVal\"\nv-bind:handleLocationChange = \"handleLocationChange\"\nv-bind:persons = \"availOptions\"\nv-bind:selectedPersons=\"personsList\"\nv-bind:handleUserChange = \"handleUserChange\"\nv-bind:handleSubmit = \"submitEdit($event)\"\nv-bind:handleCloseVehicle = \"handleCloseVehicle\"\nv-bind:addVehicleBtnSubmit=\"'Edit'\"\n/>\n\n            <!-- date_valid = {this.state.date_valid} -->\n\n            <!-- //For Eel User -->\n            <!-- eelDefaultValue={this.state.defaultEelVal} -->\n            <!-- handleEelChange={this.handleEelChange} -->\n\n            <!-- // Component props For Select Users and Listing them -->\n            <!-- handleUserChange = {this.handleUserChange} -->\n            <!-- defaultValue={this.state.isEdit ? this.state.personsList : []} -->\n  \n</div>\n</template>\n\n<script>\nimport Vue from \"vue\";\nimport FullCalendar from \"@fullcalendar/vue\";\nimport { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport interactionPlugin, { Draggable } from \"@fullcalendar/interaction\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport AddProgram from \"../../components/DilogBox/AddProgram\";\nimport $ from 'jquery';\nimport slide from \"jquery-ui/ui/effects/effect-slide\"\nimport AddVehicle from '../../components/DilogBox/AddVehicle'\nimport {formatCustomDate, dateObjFormatter, formatCustomTime} from '../../helper/helper'\nimport passwordValidator from 'password-validator'\nimport { getListOfProgrammes, getProgrammeById, getUserList, updateProgram, createProgram } from '../../services'\nimport {ToastsContainer, ToastsStore, ToastsContainerPosition} from 'react-toasts';\n\n\nconst schema = new passwordValidator()\nvar arrayOfProg = []\nvar currentMonth = new Date()\nvar valid = false\nlet removedList = []\nvar _this = null\n\nexport default Vue.extend({\n  name: \"calendar\",\n\n  components: {\n    FullCalendar,\n    AddProgram,\n    AddVehicle\n  },\n\n  data: function() {\n    return {\n      calendarPlugins: [dayGridPlugin, interactionPlugin, timeGridPlugin],\n      calendarEvents: [\n        // initial event data\n        { title: \"Event 1\", start: new Date() },\n        { title: \"Event 2\", start: \"2019-12-05\" },\n        { title: \"Event 3\", start: \"2019-12-06\" },\n        { title: \"Event 4\", start: \"2019-12-07\" },\n        { title: \"Event 5\", start: \"2019-12-10\" },\n        { title: \"Event 6\", start: \"2019-12-14\" },\n        { title: \"Event 7\", start: \"2019-12-15\" }\n      ],\n      config: {\n        defaultView: \"month\",\n        editable: true,\n        eventRender: function(event, element) {\n          console.log(event);\n        }\n      },\n      eventColor: \"#fff\",\n      showAddProgram : false,\n\n    isloading:false,\n    program: [],\n    arrayOfProgState : [],\n    vehicle: [],\n    editableDta:[],\n    currentProgrammeId : 0,\n    openAdd_Program: false,\n    isSubmit: false,\n    isEdit: false,\n    start: new Date(),\n    end: new Date(),\n    title: \"\",\n    editableTitle: \"\",\n    editablestart: \"\",\n    editableend: \"\",\n    id: 0,\n    removedUserListArray : [],\n    currentVehicleId:0,\n    updateVehicleId : [],\n    eventSelectId: 0,\n    isValid: false,\n    title_Valid:true,\n    oatmeal_valid : true,\n    beef_valid : true,\n    pancake_valid : true,\n    emerald_valid: true,\n    vehicle_Valid : false,\n    date_Valid : false,\n    eel_Valid : false,\n    location_valid : false,\n    personList_valid : false,\n    programm_Add : false,\n    event_date: new Date(),\n    dateTimeStart: new Date(),\n    dateTimeEnd: new Date(),\n    theme: \"dark\",\n    VehicleTitle : '',\n    personsList: [],\n    fullList:[],\n    VehiclesList:[],\n    usersList: false,\n    preSelect: [\"User1\", \"User2\"],\n    timeValue: new Date(),\n    openAdd_VehicleDliog: false,\n    vehicleNo: null,\n    shift: true,\n    eelVal: \"\",\n    defaultEelVal:{},\n    eelId:0,\n    locationVal: '',\n    isVehicleAdd:true,\n      oatMeal: new Date,\n      beef: new Date(),\n      pancake: new Date(),\n      emerald: new Date(),\n      currentDate:new Date(),\n    Morning: {\n      shift: 'Morning',\n      shiftTime: new Date(),\n    },\n    Evening: {\n      shift: 'Evening',\n      shiftTime: new Date(),\n    },\n    filteredList:[],\n    availOptions : [],\n    userList: []\n    };\n  },\n\n  mounted() {\n       _this = this;\n\n    document.addEventListener('DOMContentLoaded', function() {\n    let draggableEl = document.getElementById('mydraggable')\n    new Draggable(draggableEl, {\n      itemSelector: \".item-class\",\n      eventData: function (eventEl) {\n        let title = eventEl.getAttribute(\"title\");\n        return {\n          title: title\n        };\n      }\n    });\n      })\n\n     _this.monthChangehandler(0)\n\n    $('.fc-today-button').click(() => {      \n      _this.monthChangehandler(0)\n   })\n\n    $('.fc-prev-button').click(() => {  \n       _this.monthChangehandler(1)     \n   });\n\n    $('.fc-next-button').click(() => {\n      _this.monthChangehandler(2)\n });\n  },\n\n\n  methods: {\n    async monthChangehandler(id){\n    const token = localStorage.getItem('isLoggedin')\n    var updateMonth = id === 1 ? new Date(currentMonth.setMonth(currentMonth.getMonth() - 1)) : \n                      id === 2 ? new Date(currentMonth.setMonth(currentMonth.getMonth() + 1)) :\n                      new Date(currentMonth.setMonth(new Date().getMonth()))\n\n    currentMonth = updateMonth\n\n    var month = currentMonth.getMonth() > 8 ? currentMonth.getMonth()+1 : '0' + parseInt(currentMonth.getMonth()+1)\n \n    var lastDate = new Date(currentMonth.getFullYear(),month,0);\n    var programmeStart = currentMonth.getFullYear().toString()+ \"-\" + month + \"-01\"\n    var programmeEnd = currentMonth.getFullYear().toString()+ \"-\" + month + '-' +lastDate.getDate();\n\n   await getListOfProgrammes(token,programmeStart,programmeEnd).then((response) => {\n       arrayOfProg = response.data.data.map((data) => {\n          var obj = {\n            id: data.programmes.length > 0 ? data.programmes[0].programme_id : 0,\n            title : (data.programmes.length > 0 ? data.programmes[0].vechicleCount : 0) + \" vehicles\",\n            date : data.date\n          }\n           return data.programmes.length > 0 ? obj : false\n      })\n        _this.arrayOfProgState = arrayOfProg\n    })\n  },\n\n  validateProgram : function(){\n    let pancakeValid = false\n    let emeraldValid = false\n    \n    if(_this.pancake >= _this.oatMeal){\n      pancakeValid = true\n    }else{\n      pancakeValid = false\n    }\n\n    if(_this.emerald > _this.oatMeal){\n      emeraldValid = true\n    }else{\n      emeraldValid = false\n    }\n\n      _this.pancake_valid = pancakeValid,\n      _this.emerald_valid = emeraldValid\n\n    let validateObj = pancakeValid && emeraldValid\n    return validateObj\n  },\n\n    handleDateClick: function(arg) {\n      // console.log(\"date click \",_this.openAdd_Program);\n      \n    const temp = _this.arrayOfProgState.filter(data => {\n      return data.date === formatCustomDate(arg.date,'-')\n    })\n\n    const empty = \"\";\n    const defaultDate = arg.date;\n    const emptyList = [];\n    var token = localStorage.getItem('isLoggedin')\n    if(arg.date > new Date()){\n      if(!(temp.length > 0)){\n        {\n          getUserList(token,new Date(arg.date)).then(response => {\n            const users = response.data.data.map((data)=>{\n              var obj = {\n                label: data.user_name,\n                value: data.user_id,\n                id : data.user_id\n              }\n              return obj\n            })\n              _this.userList = users\n              // console.log(_this.userList);\n              \n          })\n            \n          const currentDate = new Date(arg.date)\n        \n        // bind with an arrow function\n    \n          _this.oatmeal_valid    = true,\n          _this.beef_valid       = true,\n          _this.pancake_valid    = true,\n          _this.emerald_valid    = true,\n          _this.openAdd_Program  = !_this.openAdd_Program,\n          _this.VehicleTitle     = empty,\n          _this.isSubmit         = true,\n          _this.shift            = true,\n          _this.start            = defaultDate,\n          _this.end              = defaultDate,\n          _this.currentDate      = currentDate,\n          _this.calendarEvents   = emptyList,\n          _this.programm_Add     = true\n          _this.personsList      = emptyList\n          // personId:0\n      }\n      }else{\n        ToastsStore.error(\"Only one Program can be add at particular date!\")\n      }\n}\nelse{\n  ToastsStore.error(\"Please select future dates only for creating Programme!\")\n}\n},\n\n    eventClick:function(program){\n        \n    const removedUserListArray = []\n    const token = localStorage.getItem('isLoggedin');\n    \n    getProgrammeById(token,parseInt(program.event.id)).then( async function(response){      \n        // console.log(response);\n      const tempProg = []\n      var data = response.data.data[0]\n      var date = new Date(data.date)\n      \n      await getUserList(token,date).then(response => {\n          \n        const users = response.data.data.map((data)=>{\n          var obj = {\n            label: data.user_name,\n            value: data.user_id,\n            id : data.user_id\n          }          \n          return obj\n        })\n       Vue.set(_this.$data,'userList',users) \n      })\n\n      const events = data.programmes_vehicles.map(vehicle => {\n        const eel = _this.userList.filter(user => {\n          return user.id === data.user_id\n        })\n        \n      var list = vehicle.prog_vehicle_users.map(user => {\n        const obj = {\n          label: user.user.display_name,\n          value: user.user_id,\n          id : user.user_id\n        }\n        return obj\n      })\n\n    const vehicles = data.programmes_vehicles.map(v_data => {      \n\n      const assingnedPerson = v_data.prog_vehicle_users.map((user) => {\n        const temp = {\n          label: user.user.display_name,\n          value: user.user.display_name,\n          id : user.user_id\n        }\n\n        return temp\n  })\n\n  const emergencyUser = {\n    label:  v_data.support_user.display_name, value:  v_data.support_user_id, id:  v_data.support_user_id\n  }\n  // console.log(emergencyUser);\n  \n  // const emergencyUser = _this.state.userList.filter(userName => {\n    \n  //   return userName.id === v_data.support_user_id\n  // })\n  \n      const obj = {\n        date:_this.currentDate,\n        VehicleTitle: v_data.title,\n        start: dateObjFormatter(date,v_data.v_s_t),\n        end: dateObjFormatter(date,v_data.v_e_t),\n        id: v_data.vehicle_id,\n        vehicleNo: v_data.vehicle_no,\n        eelVal : emergencyUser.label,\n        personsList:[...assingnedPerson],\n        eelId : v_data.support_user_id,\n        locationVal: v_data.additional_info,\n\n      }\n      return obj\n    })\n    \n    tempProg.push({\n      title: data.programmes_vehicles.length +' vehicles',\n      programme_id : data.id,\n      date:date,\n      emerald : data.oct_evening !== \"\" ? dateObjFormatter(date,data.oct_evening) : dateObjFormatter(date,data.oct_morning),\n      beef : data.vmt_evening !== \"\" ? dateObjFormatter(date,data.vmt_evening) : dateObjFormatter(date,data.vmt_morning),\n      pancake : dateObjFormatter(date,data.ws_o_time),\n       oatMeal : data.oot_evening !== \"\" ? dateObjFormatter(date,data.oot_evening) : dateObjFormatter(date,data.oot_morning),\n      VehiclesList : [...vehicles]\n    })\n\n       const obj = {\n        date:new Date(data.date),\n        VehicleTitle: vehicle.title,\n        start: dateObjFormatter(new Date(),vehicle.v_s_t),\n        end: dateObjFormatter(new Date(),vehicle.v_e_t),\n        id: vehicle.vehicle_id,\n        vehicleNo: vehicle.vehicle_no,\n        personsList: list,\n        eelId : vehicle.support_user_id,\n        locationVal: vehicle.additional_info,\n        eelVal : vehicle.support_user.display_name,\n        currentProgrammeId : program.event.id,\n        openAdd_Program : false\n      }\n      return obj \n      })\n\n        _this.oatmeal_valid = true,\n        _this.beef_valid = true,\n        _this.pancake_valid = true,\n        _this.emerald_valid = true,\n        _this.program = tempProg,\n        _this.openAdd_Program= !_this.openAdd_Program,\n        _this.isEdit= true,\n        _this.isSubmit= false,\n        _this.calendarEvents = [...events], \n        _this.removedUserListArray = removedUserListArray,\n        _this.beef    = data.vmt_evening !== \"\" ? dateObjFormatter(date,data.vmt_evening) : dateObjFormatter(date,data.vmt_morning),\n        _this.emerald = data.oct_evening !== \"\" ? dateObjFormatter(date,data.oct_evening) : dateObjFormatter(date,data.oct_morning),\n        _this.oatMeal = data.oot_evening !== \"\" ? dateObjFormatter(date,data.oot_evening) : dateObjFormatter(date,data.oot_morning),\n        _this.pancake = dateObjFormatter(date,data.ws_o_time),\n        _this.programm_Add=false,\n        _this.event_date = date,\n        _this.shift = data.oct_evening === \"\" ? true : false,\n        _this.currentDate = new Date(data.date)\n\n        console.log(_this.beef);\n        \n     \n    })\n     // console.log(typeof(_this.state.personId));\n    },\n\n    handleEdit : function() {    \n   if(_this.event_date > new Date()){\n\n    const token = localStorage.getItem('isLoggedin')\n    \n    const cloneProgram = [..._this.program]\n    const events = [..._this.calendarEvents];\n\n    const updatedProg = cloneProgram.map(info =>{\n\n      const obj ={\n        title: _this.calendarEvents.length +' vehicles' ,\n        programme_id : info.programme_id,\n        date:_this.currentDate,\n        emerald : _this.emerald,\n        beef : _this.beef,\n        pancake : _this.pancake,\n        oatMeal : _this.oatMeal,\n        VehiclesList : [...events]\n      }\n      return obj\n    })    \n    events.map(event => {\n      return event[_this.eventSelectId];\n    });\n\n    updateProgram(token,updatedProg,_this.shift,_this.calendarEvents,_this.updateVehicleId,_this.removedUserListArray)\n    .then(()=>{\n      window.location.reload(false);\n    })\n    // events[_this.state.eventSelectId] = newEvent;\n\n      _this.VehiclesList = events,\n      _this.beef = _this.beef,\n      _this.date = _this.currentDate,\n      _this.emerald = _this.emerald,\n      _this.oatMeal = _this.oatMeal,\n      _this.pancake = _this.pancake,\n      _this.title= _this.calendarEvents.length+'Programs' ,\n      _this.openAdd_Program = false,\n      _this.isloading = true\n      _this.isSubmit = false,\n      _this.isEdit = false    \n   }else{\n     ToastsStore.error('Future events can only be edited!')\n   }\n  },\n\n  handleTitleChange:function(event){\n    const tempVal = event.target.value;\n    //  console.log(tempVal);\n    if (_this.isSubmit) {\n        _this.title_Valid = true,\n        _this.VehicleTitle = tempVal\n    } else {\n        _this.title_Valid = true,\n        _this.VehicleTitle = tempVal\n    }\n  },\n\n  handleEelChange : function(e){\n    // console.log(e);\n      _this.eelVal= e,\n      _this.eelId = e.id,\n      _this.eel_Valid = true\n  },\n\n    closeAddProgram:function(){\n        _this.openAdd_Program = false\n    },\n\n    handleAddProgram: function(){\n      \n    const valid_prog = this.validateProgram()\n    // console.log(temp);\n\nif(_this.calendarEvents.length > 0 && valid_prog){\n  if(_this.pancake_valid && _this.oatmeal_valid && _this.beef_valid && _this.emerald_valid){\n      const program = []\n\n      const events = [..._this.calendarEvents];\n      // const id = new Date().getTime();\n      program.push({\n        title: _this.calendarEvents.length+' Vehicles' ,\n        date:formatCustomDate(_this.currentDate,'-'),\n        oatMeal : formatCustomTime(_this.oatMeal,':'),\n        beef : formatCustomTime(_this.beef,':'),\n        pancake : formatCustomTime(_this.pancake,':'),\n        emerald : formatCustomTime(_this.emerald,':'),\n        VehiclesList : [...events]\n      });\n  \n      arrayOfProg = [...program,...arrayOfProg]\n      \n        _this.program               = program,\n        _this.arrayOfProgState      = arrayOfProg,\n        _this.openAdd_Program       = false,\n        _this.isSubmit              = false,\n        _this.isEdit                = false,\n        _this.programm_Add          =false\n      \n      const token = localStorage.getItem('isLoggedin')\n      createProgram(token,program,_this.shift,_this.calendarEvents,_this.personsList)\n      .then(response => {\n        window.location.reload(false);\n      })\n\n        _this.personsList = _this.personsList\n  \n    }\n}else{\n  // ToastsStore.error(\"please add atleast one vehicle to add program! \") ;\n}\n },\n    openAddVehicle:function(){   \n      \n      const list = _this.userList.filter((data) => {\n      return _this.fullList.findIndex(user => data.id === user.id) < 0\n     })      \n\n      _this.VehicleTitle     = \"\",\n      _this.start            = new Date(),\n      _this.end              = new Date(),\n      _this.id               = 0,\n      _this.vehicleNo        = \"\",\n      _this.availOptions     = list,\n      _this.eelVal           = {},\n      _this.personsList      = [],\n      _this.eelId            = 0,\n      _this.locationVal      = \"\",\n      _this.isVehicleAdd     = true,\n      _this.date_Valid       = true,\n      _this.title_Valid      = true,\n      _this.vehicle_Valid    = true,\n      _this.eel_Valid        = true,\n      _this.location_valid   = true,\n      _this.personList_valid = true\n\n      _this.valid = false\n      _this.openAdd_VehicleDliog = true  \n\n      // console.log(\"open add vehicle\",_this.availOptions);\n          \n    },  \nhandleCloseVehicle:function(){  \n      _this.openAdd_VehicleDliog = false\n    //   console.log(\"closeAddVehicle hit before \",_this.openAdd_VehicleDliog)  ;\n    //  _this.$set(_this.$data,'openAdd_VehicleDliog',false)  \n      // console.log(\"handleCloseVehicle hit after\",_this.openAdd_VehicleDliog);  \n    },  \n\n    validateVehicle:function(){\n\nlet titleValid = false\nlet dateValid = false\nlet eelValid = false\nlet vehicleValid = false\nlet locationValid = false\nlet personValid = false\n  if(_this.VehicleTitle){\n    titleValid = true\n}else{\n  titleValid =false\n}\n\nif(new Date(_this.end) > new Date(_this.start)){\n    dateValid = true\n}else{\n  dateValid = false\n}\n\nif(_this.eelVal){\n  eelValid = true\n}else{\n  eelValid = false\n}\n\nif(_this.vehicleNo){\n  vehicleValid = true\n}else{\n  vehicleValid = false\n}\n\nif(_this.locationVal.length>0){\n  locationValid = true\n}else{\n  locationValid = false\n}\n\nif(_this.personsList.length>0){\n  personValid = true\n}else{\n  personValid = false\n}\n\n  _this.title_Valid      = titleValid,\n  _this.date_Valid       = dateValid,\n  _this.eel_Valid        = eelValid,\n  _this.vehicle_Valid    = vehicleValid,\n  _this.location_valid   = locationValid,\n  _this.personList_valid = personValid\n\n\nlet validateObj =  titleValid && dateValid && eelValid && vehicleValid && locationValid && personValid\n\nreturn validateObj\n\n    },\n\n    handleAddEvent:function(){    \n    var temp = _this.validateVehicle()    \n    \nconsole.log(\"titleValid\",_this.title_Valid);\nconsole.log(\"dateValid\",_this.date_Valid);\nconsole.log(\"eelValid\",_this.eel_Valid);\nconsole.log(\"vehicleValid\",_this.vehicle_Valid);\nconsole.log(\"locationValid\",_this.location_valid);\nconsole.log(\"personValid\",_this.personList_valid);\n\n     valid = temp && _this.title_Valid && _this.date_Valid && _this.eel_Valid && _this.vehicle_Valid && _this.location_valid && _this.personList_valid\n    // var valid = true  \n    if (valid) {  \n      const events = [..._this.calendarEvents];  \n        \n      const templist = [..._this.fullList, ..._this.personsList]  \n  \n      events.push({  \n        date:_this.currentDate,  \n        VehicleTitle: _this.VehicleTitle,  \n        start: _this.start,\n        end: _this.end,\n        id: _this.id,\n        vehicleNo: _this.vehicleNo,\n        personsList: _this.personsList,\n        eelId : _this.eelId,\n        locationVal: _this.locationVal,\n        eelVal: _this.eelVal.label\n      });\n       \n        _this.calendarEvents      = events,\n        _this.isSubmit            = true,\n        _this.isEdit              = false,\n        _this.openAdd_VehicleDliog= false,\n        _this.id                  = _this.id + 1,\n        _this.eelVal              = _this.eelVal,\n        _this.fullList            = templist,\n        _this.personsList         = _this.personsList,\n        _this.title_Valid         = false,\n        _this.vehicle_Valid       = false,\n        _this.date_Valid          = false,\n        _this.eel_Valid           = false,\n        _this.location_valid      = false,\n        _this.personList_valid    = false\n\n      console.log(_this.calendarEvents);\n    } else{\n      // var inp = !this.state.date_Valid ? \"Time should be different & greater than start time\" : null\n    }\n    },\n\n  openEdit : function(data){\n    // console.log(date); \n    \n    console.log(data);\n    \n    const v_id = [..._this.updateVehicleId]\n\n  const vehicleId = _this.calendarEvents.filter(vehicle => {\n            return vehicle.vehicleNo === data.v_no\n  })\n      v_id.push(vehicleId[0].id)\n\n      // let editedVehicleList = v_id.filter((v,i) => v_id.indexOf(v) === i)\n      // console.log(x);\n      \n    const list = data.persons.split(\",\")    \n      const assingnedPerson = _this.userList.filter((data) => {\n        return list.findIndex(user => data.value.toString() === user) !== -1\n  })    \n  // console.log(assingnedPerson);\n\n  let eel = _this.userList.filter((user) => {\n    return user.label === data.eel\n  })\n  // console.log(eel);\n\n  const Avail_Opt = _this.userList.filter((data) => {\n    return _this.fullList.findIndex(user => data.id === user.id) < 0\n   }) \n \n      _this.defaultEelVal        = eel.label,\n      _this.eelVal               = eel[0],\n      _this.eelId                = eel.id,\n      _this.start                = dateObjFormatter(_this.currentDate,data.v_move_start),\n      _this.end                  = dateObjFormatter(_this.currentDate,data.v_move_end),\n      _this.locationVal          = data.location,\n      _this.personsList          = assingnedPerson,\n      _this.VehicleTitle         = data.title,\n      _this.vehicleNo            = data.v_no,\n      _this.isVehicleAdd         = false,\n      _this.date_Valid           = true,\n      _this.title_Valid          = true,\n      _this.eel_Valid            = true,\n      _this.vehicle_Valid        = true,\n      _this.location_valid       = true,\n      _this.personList_valid     = true,\n      _this.updateVehicleId      = v_id,\n      _this.currentVehicleId     = vehicleId[0].id\n    \n      _this.openAdd_VehicleDliog = true,\n      _this.availOptions         =  Avail_Opt\n          // eelVal: data.eel,\n    },\n\n      datetimehandle : function(data){\n        // console.log(data);\n        if(data.id === 1){\n          console.log(\"oatmeal\");\n          _this.oatMeal = new Date(data.time)\n          _this.oatmeal_valid = true        }\n        if(data.id === 2 ){\n          console.log(\"pancake \");\n          if(new Date(data.time) >= new Date(_this.oatMeal)){\n          _this.pancake = new Date(data.time)\n          _this.pancake_valid = true        }\n        }if(data.id === 3){\n          console.log(\"beef \");\n          _this.beef = new Date(data.time)\n          _this.beef_valid = true        }\n        if(data.id == 4){\n          console.log(\"emerald \");\n          if(new Date(data.time) > new Date(_this.oatMeal)){\n          _this.emerald = new Date(data.time)\n          _this.emerald_valid = true        \n          }\n        }\n        if(data.id == 5){          \n          if(new Date(data.time) < new Date(_this.end) && new Date(data.time) !== new Date(_this.end)){\n          console.log(\"start time \");\n          _this.start = new Date(data.time)\n          _this.date_Valid = true\n        }\n        }\n        if(data.id == 6){\n          if(new Date(data.time) > new Date(_this.start) && new Date(data.time) !== new Date(_this.start)){\n          _this.end = new Date(data.time)\n          _this.date_Valid = true\n        }\n        }\n      },\n\n      vehicleNoHandler: function(data){\n        const tempNo = data.target.value \n          schema\n        .has().not().symbols()\n        .has().not().spaces()\n\n          if (schema.validate(tempNo)) {\n              _this.vehicleNo     = tempNo,\n              _this.vehicle_Valid = true\n          } else {\n            ToastsStore.error(\"enter valid vehicle number\")\n              _this.vehicle_Valid = false\n            }\n      },\n\n   handleLocationChange:function(e){\n\n    // console.log(e.target.value);\n    const tempVal = e.target.value\n\n      _this.locationVal= tempVal,\n      _this.location_valid = true\n \n      },\n\n   handleUserChange : function(data){\nconsole.log(\"handle user change \",data);\n\n    let difference = _this.personsList.filter(x => data !== null ? !data.includes(x) : _this.personsList)  // calculates diff\n\n    removedList = [...removedList,...difference]\n\n    removedList = removedList.filter((v,i) => removedList.indexOf(v) === i)\n    // console.log(removedList);\n    \n    if (data && data.length > 0){\n        _this.personList_valid = true,\n       // value:temp\n        _this.personsList = [...data]\n    } else {\n        _this.personsList = []\n    }\n  }\n  }\n});\n</script>\n\n<style lang='scss'>\n@import \"~@fullcalendar/core/main.css\";\n@import \"~@fullcalendar/daygrid/main.css\";\n@import \"~@fullcalendar/timegrid/main.css\";\n@import \"~@fullcalendar/resource-timeline/main.css\";\n</style>"]}]}